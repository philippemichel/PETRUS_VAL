# Data Directory

## Structure

- `raw/` - Place your raw data files here (CSV, Excel, etc.). These files are **not tracked by git** for privacy.
- `processed/` - Processed data files generated by the scripts. These files are **not tracked by git**.
- `data_template.csv` - Example data structure showing expected format.

## Data Format

### Expected Columns

Your data should include at minimum:

- `patient_id` or `subject_id` - Unique identifier for each patient/subject
- `observer_id` - Identifier for the observer (e.g., 1, 2, "Observer A", etc.)
- `assessment_date` - Date of the assessment (YYYY-MM-DD format)

### Measurement Variables

Add columns for each measurement or rating, for example:

**Categorical variables:**
- `image_quality_category` - Categories like "Poor", "Fair", "Good", "Excellent"
- `diagnosis` - Diagnostic classification

**Ordinal variables:**
- `quality_score` - Numeric scale (e.g., 1-10)
- `severity_rating` - Ordered categories

**Continuous variables:**
- `bladder_volume_ml` - Measured volume in milliliters
- `wall_thickness_mm` - Measured thickness in millimeters
- `measurement_value` - Any continuous measurement

### Data Formats Supported

1. **Long format** (recommended for raw data):
   - One row per observer-patient combination
   - Each observation is a separate row
   - Example: See `data_template.csv`

2. **Wide format** (can be used directly for analysis):
   - One row per patient
   - Separate columns for each observer's measurements
   - Column naming: `variable_obs1`, `variable_obs2`

## Privacy and Security

⚠️ **IMPORTANT**: 
- Never commit files containing identifiable patient information to git
- The `raw/` and `processed/` directories are excluded from version control
- Always de-identify data before analysis
- Follow local data protection regulations (GDPR, HIPAA, etc.)

## File Naming Conventions

Use clear, descriptive names for your data files:

✅ Good examples:
- `ultrasound_readings_2025_jan.csv`
- `observer_validation_cohort1.xlsx`
- `petrus_val_baseline_data.csv`

❌ Avoid:
- `data.csv`
- `temp.xlsx`
- `final_FINAL_v2.csv`

## Data Validation Checklist

Before running analysis, verify:

- [ ] All patient IDs are de-identified
- [ ] Observer IDs are consistent across all rows
- [ ] Dates are in YYYY-MM-DD format or recognizable date format
- [ ] No identifying information (names, addresses, etc.)
- [ ] Missing values are coded consistently (NA, blank, or specific code)
- [ ] Numeric variables contain only numbers
- [ ] Categorical variables use consistent spelling and capitalization

## Getting Your Data Ready

1. **Export from your data collection system**
   - Export to CSV or Excel format
   - Include all relevant variables

2. **De-identify**
   - Replace patient names/IDs with study codes
   - Remove any identifying information

3. **Place in raw/ directory**
   - Copy your file to `data/raw/`
   - Keep original data backed up separately

4. **Run import script**
   - Use `scripts/01_data_import.R`
   - Follow the Quick Start Guide

## Example Data

The `data_template.csv` file contains example data with:
- 5 patients (P001 to P005)
- 2 observers per patient
- Multiple measurement types:
  - Ordinal: quality_score (1-10)
  - Continuous: bladder_volume_ml, wall_thickness_mm, residual_volume_ml
  - Categorical: image_quality_category (Poor/Fair/Good/Excellent)

You can use this template to structure your own data.
